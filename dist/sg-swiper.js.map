{"version":3,"sources":["../src/sg-swiper.ts"],"sourcesContent":["import { SwipeSession } from \"./interfaces/SwipeSession\";\r\nimport { SwiperState } from \"./interfaces/SwipeState\";\r\nimport {\r\n  NavigationElements,\r\n  SwiperInterface,\r\n  SwiperSlide,\r\n} from \"./interfaces/Swiper\";\r\nimport { SwiperArgs } from \"./interfaces/SwiperArgs\";\r\n\r\nexport default class Swiper implements SwiperInterface {\r\n  _state: SwiperState = {\r\n    currentIndex: 0,\r\n    currentPosition: 0,\r\n    initialized: false,\r\n    swiperWidth: 0,\r\n    slidesWrapperWidth: 0,\r\n    slidesLoaded: true,\r\n    fixedTranslate: false\r\n  };\r\n  _swipeSession: SwipeSession = {\r\n    active: false,\r\n    type: \"mouse\",\r\n    startX: 0,\r\n    startTime: 0,\r\n    velocity: 0,\r\n    isClick: false,\r\n    deltaX: 0,\r\n    lastEvent: null,\r\n    lastEventDeltaX: 0,\r\n    lastEventVelocity: 0,\r\n    direction: 0,\r\n  };\r\n\r\n  _indexChangeCallback: ((index: number) => void) | null = null;\r\n\r\n  _navigationElements: NavigationElements = {};\r\n\r\n  _childrenSwipers: SwiperInterface[] | null = null;\r\n  _slideClassName: string | null = null;\r\n  _swiperElement: HTMLElement | null = null;\r\n  _slidesWrapper: HTMLElement | null;\r\n  _auto: number | null = null;\r\n  _autoInterval: NodeJS.Timeout | undefined;\r\n  _slides: SwiperSlide[] = [];\r\n  _slideCount: number = 0;\r\n  _draggable: boolean = false;\r\n  _limitToEdges: boolean = false;\r\n  _slideLoad: ((slide: HTMLElement) => Promise<void>) | null = null;\r\n  _slideClick: ((index: number, element: HTMLElement) => void) | null =\r\n    null;\r\n  _eventListeners: [\r\n    HTMLElement | null | Window,\r\n    string,\r\n    (e: Event) => void,\r\n    { capture?: boolean, passive?: boolean }?\r\n  ][];\r\n  _activeSessionEventListeners: {\r\n    mouse: [keyof DocumentEventMap, (e: MouseEvent | TouchEvent) => void][];\r\n    touch: [keyof DocumentEventMap, (e: MouseEvent | TouchEvent) => void][];\r\n  };\r\n\r\n  /**\r\n  * Constructor for the Swiper class.\r\n  *\r\n  * @param {HTMLElement} element - the HTML container element to initialize the Swiper\r\n  * @param {SwiperArgs} args - optional arguments to configure the Swiper\r\n  */\r\n  constructor(element: HTMLElement, args: SwiperArgs | null = null) {\r\n    // check if element is provided and extract it\r\n    if (!element) {\r\n      console.error(\"Cannot initialize Swiper: no element provided.\");\r\n      return;\r\n    }\r\n    this._swiperElement = element;\r\n\r\n    // extract the arguments\r\n    if (args) {\r\n      this._indexChangeCallback = args.onSlideChange ?? null;\r\n      this._auto = args.auto ?? null;\r\n      this._slideClassName = args.slideClassName ?? null;\r\n      this._navigationElements = args.navigation ?? {};\r\n      this._childrenSwipers = args.linkedSwipers ?? null;\r\n      this._slideLoad = args.slideLoad ?? null;\r\n      this._slideClick = args.onSlideClick ?? null;\r\n      this._state.slidesLoaded = args.slideLoad ? false : true;\r\n      this._draggable = args.draggable ?? false;\r\n      this._limitToEdges = args.limitToEdges ?? false;\r\n    }\r\n\r\n    // create the list of slides\r\n    const slideCollection = this._slideClassName\r\n      ? this._swiperElement.querySelectorAll(\".\" + this._slideClassName)\r\n      : this._swiperElement.firstElementChild?.children ?? [];\r\n    if (slideCollection.length === 0) {\r\n      console.error(\"Cannot initialize Swiper: no slides found.\");\r\n      return;\r\n    }\r\n\r\n    //extract the slides wrapper\r\n    this._slidesWrapper = slideCollection[0].parentElement;\r\n\r\n    //create the list of slides\r\n    this._slides = (Array.from(slideCollection) as HTMLElement[]).map(\r\n      (slide) => {\r\n        const id = slide.id\r\n          ? slide.id\r\n          : (() => {\r\n            const generatedId =\r\n              \"slide-\" + Math.random().toString(36).substring(2, 15);\r\n            slide.id = generatedId;\r\n            return generatedId;\r\n          })();\r\n\r\n        return {\r\n          id,\r\n          element: slide,\r\n          position: 0,\r\n          width: 0,\r\n          loaded: this._slideLoad ? false : true,\r\n        };\r\n      }\r\n    );\r\n    //set the number of slides\r\n    this._slideCount = this._slides.length;\r\n\r\n    // set the eventListeners when a swiper session is activated\r\n    this._activeSessionEventListeners = {\r\n      mouse: [\r\n        [\"mousemove\", this._handleMove],\r\n        [\"mouseup\", this._handleRelease],\r\n      ],\r\n      touch: [\r\n        [\"touchmove\", this._handleMove],\r\n        [\"touchend\", this._handleRelease],\r\n        [\"touchcancel\", this._handleRelease],\r\n      ],\r\n    };\r\n    // add the event listeners\r\n    this._eventListeners = [\r\n      [this._swiperElement, \"mouseover\", this._handleHover.bind(this), { passive: true }],\r\n      //[this._swiperElement, 'mouseleave', this._handleLeave.bind(this)],\r\n      [window, \"resize\", this._getDimensions, { passive: true }],\r\n    ];\r\n\r\n    // add the draggable event listeners\r\n    if (this._draggable) {\r\n      this._eventListeners.push(\r\n        //@ts-ignore\r\n        [this._swiperElement, \"mousedown\", this._handlePush, { passive: true }],\r\n        [this._swiperElement, \"touchstart\", this._handlePush, { passive: true }],\r\n        [this._swiperElement, \"selectstart\", this._preventDefault, { capture: true }],\r\n        [this._swiperElement, \"dragstart\", this._preventDefault, { capture: true }]\r\n      );\r\n    }\r\n\r\n    // start the swiper\r\n    this.start(args?.slideStart);\r\n  }\r\n\r\n  /**\r\n   * Start the slider at the specified index, if provided.\r\n   *\r\n   * @param {number} index - The index at which to start the slider\r\n   */\r\n  start = (index?: number) => {\r\n    if (\r\n      !this._state.initialized &&\r\n      this._swiperElement) {\r\n      // get the dimensions of elements to calculate properly the translations values \r\n      this._getDimensions();\r\n\r\n      // add the event listeners\r\n      this._eventListeners.forEach(([element, event, callback, options]) => {\r\n        element?.addEventListener(event, callback, options);\r\n      });\r\n\r\n      // add the slide click event listeners to each slides\r\n      this._slides.forEach(({ element }, index) => {\r\n        element.addEventListener(\"click\", (e: Event) => {\r\n          this._handleSlideClick(e, element, index);\r\n        });\r\n      });\r\n\r\n      // add the navigation previous slide click event listeners\r\n      if (this._navigationElements.prev)\r\n        this._navigationElements.prev.forEach((el) => {\r\n          el.addEventListener(\"click\", this._handlePrevClick.bind(this));\r\n        });\r\n\r\n      // add the navigation next slide click event listeners\r\n      if (this._navigationElements.next)\r\n        this._navigationElements.next.forEach((el) => {\r\n          el.addEventListener(\"click\", this._handleNextClick.bind(this));\r\n        });\r\n\r\n      // set the swiper initialized\r\n      this._state.initialized = true;\r\n\r\n      // set the starting index\r\n      this._setIndex(index ?? 0);\r\n\r\n      // set the auto slide interval if provided\r\n      if (this._auto) {\r\n        this._autoInterval = setInterval(() => {\r\n          if (this._slides[this._state.currentIndex].loaded) {\r\n            this._handleNextClick();\r\n          }\r\n        }, this._auto);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * A function to handle hover behavior.\r\n   */\r\n  _handleHover = () => {\r\n    clearInterval(this._autoInterval);\r\n  }\r\n  _preventDefault = (e: Event) => {\r\n    e.preventDefault();\r\n  }\r\n  /*\r\n  _handleLeave() {\r\n        if(this._auto) {\r\n                this._autoInterval = setInterval(() => {\r\n                    if(this._slides[this._state.currentIndex].loaded) {\r\n                        this._handleNextClick();\r\n                    }\r\n                }, this._auto);\r\n            }\r\n    }\r\n  */\r\n  /**\r\n  * Handles the click event for the previous button.\r\n  */\r\n  _handlePrevClick = () => {\r\n    const newIndex =\r\n      this._state.currentIndex - 1 < 0\r\n        ? this._slideCount - 1\r\n        : this._state.currentIndex - 1;\r\n    this._setIndex(newIndex);\r\n  }\r\n  /**\r\n   * Handles the click event for navigating to the next item.\r\n   */\r\n  _handleNextClick = () => {\r\n    const newIndex =\r\n      this._state.currentIndex + 1 > this._slideCount - 1\r\n        ? 0\r\n        : this._state.currentIndex + 1;\r\n    this._setIndex(newIndex);\r\n  }\r\n\r\n  /**\r\n   * Handle the click event on a slide element.\r\n   *\r\n   * @param {Event} e - the click event\r\n   * @param {HTMLElement} element - the slide element\r\n   * @param {number} index - the index of the slide\r\n   */\r\n  _handleSlideClick = (e: Event, element: HTMLElement, index: number) => {\r\n    e.preventDefault();\r\n    if ((this._swipeSession.isClick || !this._draggable) && this._slideClick) {\r\n      this._slideClick(index, element);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update dimensions and positions of slides\r\n   */\r\n  _getDimensions = () => {\r\n    // Update swiper width\r\n    this._state.swiperWidth = this._swiperElement?.offsetWidth ?? 0;\r\n    this._state.slidesWrapperWidth = this._slidesWrapper?.scrollWidth ?? 0;\r\n\r\n    if (this._slidesWrapper) {\r\n      if (this._state.slidesWrapperWidth <= this._state.swiperWidth) {\r\n        const fixed = (this._state.swiperWidth - this._state.slidesWrapperWidth) / 2\r\n        this._translate(fixed, 0);\r\n        this._state.fixedTranslate = fixed;\r\n      } else {\r\n        this._state.fixedTranslate = false;\r\n      }\r\n    }\r\n\r\n    // Update slides dimensions and positions\r\n    this._slides = this._slides.map(slide => {\r\n      const width = slide.element.offsetWidth\r\n      const position = slide.element.offsetLeft\r\n      return {\r\n        ...slide,\r\n        width,\r\n        position\r\n      }\r\n    }\r\n    );\r\n\r\n    // Translate to current slide if initialized\r\n    if (this._state.initialized && this._slides[this._state.currentIndex]) {\r\n      this._translate(\r\n        (this._state.swiperWidth - this._slides[this._state.currentIndex].width) / 2 -\r\n        this._slides[this._state.currentIndex].position\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stops all event listeners and resets the state of the component.\r\n   */\r\n  stop = () => {\r\n\r\n    // Remove all event listeners\r\n    this._eventListeners.forEach(([element, event, callback, options]) => {\r\n      element?.removeEventListener(event, callback, options);\r\n    });\r\n\r\n    // Remove slides click event listeners\r\n    this._slides.forEach(({ element }, index) => {\r\n      element.removeEventListener(\"click\", (e: Event) => {\r\n        this._handleSlideClick(e, element, index);\r\n      });\r\n    });\r\n\r\n    // Remove navigation click event listeners\r\n    if (this._navigationElements.prev)\r\n      this._navigationElements.prev.forEach((el) => {\r\n        el.removeEventListener(\"click\", this._handlePrevClick.bind(this));\r\n      });\r\n    if (this._navigationElements.next)\r\n      this._navigationElements.next.forEach((el) => {\r\n        el.removeEventListener(\"click\", this._handleNextClick.bind(this));\r\n      });\r\n\r\n    // Clear auto slide interval\r\n    if (this._autoInterval) {\r\n      clearInterval(this._autoInterval);\r\n    }\r\n    // Reset swiper state\r\n    this._translate(0);\r\n    this._state.initialized = false;\r\n  }\r\n\r\n  /**\r\n   * Translates the slides wrapper by the specified value.\r\n   *\r\n   * @param {number} value - The value to translate by\r\n   * @param {number | null} duration - The duration of the translation, defaults to null\r\n   */\r\n  _translate = (value: number, duration: number | null = null) => {\r\n    if(this._state.fixedTranslate === this._state.currentPosition) return;\r\n    if (this._slidesWrapper) {\r\n      this._slidesWrapper.style.transform = `translate3d(${value}px, 0, 0)`;\r\n      if (duration)\r\n        this._slidesWrapper.style.transition = `${duration}ms cubic-bezier(.08,.5,.2,1) transform`;\r\n    }\r\n    this._state.currentPosition = value;\r\n  }\r\n\r\n  /**\r\n   * Handles the push event triggered by a mouse click or touch on the swiper element.\r\n   *\r\n   */\r\n  _handlePush = (e: MouseEvent | TouchEvent): void => {\r\n    // get focus and remose text selection in window when starting to interact with the swiper\r\n    this._swiperElement?.focus();\r\n    window.getSelection()?.removeAllRanges();\r\n    const clientX = (e as MouseEvent).clientX ?? (e as TouchEvent).touches[0]?.clientX ?? null\r\n    // start a new swipe session\r\n    this._swipeSession = {\r\n      active: true,\r\n      type: e.type === \"mousedown\" ? \"mouse\" : \"touch\",\r\n      startX: clientX,\r\n      startTime: e.timeStamp,\r\n      velocity: 0,\r\n      isClick: false,\r\n      deltaX: 0,\r\n      lastEvent: e,\r\n      lastEventDeltaX: 0,\r\n      lastEventVelocity: 0,\r\n      direction: 0,\r\n    };\r\n    // add event listeners for the current swipe session (move and release)\r\n    this._activeSessionEventListeners[this._swipeSession.type].forEach(\r\n      ([event, callback]) => {\r\n        document.addEventListener(event, callback as any, { passive: true });\r\n      }\r\n    );\r\n\r\n    this._triggerEvent(\"push\");\r\n  }\r\n\r\n  /**\r\n   * Handles the release action triggered by a mouse up or touch end.\r\n   *\r\n   */\r\n  _handleRelease = () => {\r\n\r\n    // stop the current swipe session\r\n    this._swipeSession.active = false;\r\n\r\n    // remove event listeners for the current swipe session\r\n    this._activeSessionEventListeners[this._swipeSession.type].forEach(\r\n      ([event, callback]) => {\r\n        document.removeEventListener(event, callback as any);\r\n      }\r\n    );\r\n    // check if the swipe was a click\r\n    if (\r\n      this._swipeSession.deltaX < 5 &&\r\n      (this._swipeSession.lastEvent as Event).timeStamp -\r\n      this._swipeSession.startTime <\r\n      200\r\n    ) {\r\n      this._swipeSession.isClick = true;\r\n    }\r\n\r\n    this._triggerEvent(\"release\");\r\n  }\r\n\r\n  /**\r\n   * Do an action based on the given event type.\r\n   *\r\n   * @param {(\"release\" | \"push\" | \"move\")} ev - The type of event\r\n   */\r\n  _triggerEvent = (ev: \"release\" | \"push\" | \"move\") => {\r\n    if (ev === \"release\") {\r\n      this._setIndex(this._state.currentIndex);\r\n      /*\r\n      if(this._swipeSession.type === 'touch') {\r\n              this._handleLeave();\r\n      }\r\n      */\r\n    }\r\n\r\n    if (ev === \"move\") {\r\n      // calculate the new translate position and translate slider\r\n      const newTranslate = this._state.currentPosition + this._swipeSession.lastEventDeltaX;\r\n      this._translate(newTranslate);\r\n      // calculate the new index based on slider position\r\n      const newIndex = this._getIndexByPosition(-newTranslate);\r\n      // set the new index\r\n      if (newIndex > -1) this._setIndex(newIndex, false);\r\n    }\r\n\r\n    if (ev === \"push\") {\r\n      // if the push was triggered by touch action, handle hover\r\n      if (this._swipeSession.type === \"touch\") {\r\n        this._handleHover();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle the move event, updating swipe session data and triggering move to do related actions.\r\n   */\r\n  _handleMove = (e: MouseEvent | TouchEvent): void => {\r\n    if (!this._swipeSession.active) return;\r\n    const { type, startX, lastEvent } = this._swipeSession;\r\n\r\n    // get the current mouse or touch position\r\n    const clientX = type === \"mouse\"\r\n      ? (e as MouseEvent).clientX\r\n      : (e as TouchEvent).touches[0].clientX;\r\n    const lastClientX = type === \"mouse\"\r\n      ? (lastEvent as MouseEvent).clientX\r\n      : (lastEvent as TouchEvent).touches[0].clientX;\r\n\r\n    this._swipeSession.lastEvent = e;\r\n\r\n    // calculate the delta and velocity\r\n    this._swipeSession.deltaX = clientX - startX;\r\n    this._swipeSession.velocity = this._swipeSession.deltaX / (e.timeStamp - this._swipeSession.startTime);\r\n    this._swipeSession.lastEventDeltaX = clientX - lastClientX;\r\n\r\n    this._swipeSession.lastEventVelocity = this._swipeSession.lastEventDeltaX === 0\r\n      ? this._swipeSession.lastEventVelocity\r\n      : this._swipeSession.lastEventDeltaX / (e.timeStamp - (lastEvent as MouseEvent | TouchEvent).timeStamp);\r\n    this._swipeSession.direction = Math.sign(this._swipeSession.lastEventDeltaX) as -1 | 0 | 1;\r\n\r\n    this._triggerEvent(\"move\");\r\n  }\r\n\r\n  /**\r\n   * Sets the index of the slider and optionally performs a translation.\r\n   *\r\n   * @param {number} index - The index to set.\r\n   * @param {boolean} translate - Optional flag to perform translation. Defaults to true.\r\n   */\r\n  _setIndex = (index: number, translate: boolean = true): void => {\r\n\r\n    //Slides need to be lazy loaded\r\n    if (!this._state.slidesLoaded && this._slideLoad) {\r\n      const numOfAdjacentSlidesVisible = Math.ceil(((this._state.swiperWidth / this._slides[index].width) - 1) / 2);\r\n      this._slideLoad(this._slides[index]?.element)\r\n        .then(() => {\r\n          this._slides[index].loaded = true;\r\n          this._checkIfAllLoaded();\r\n\r\n          // load adjacent visible slides\r\n          if (!this._state.slidesLoaded) {\r\n            for (let i = 1; i <= numOfAdjacentSlidesVisible; i++) {\r\n              if (this._slides[index + i]) {\r\n                (this._slideLoad as any)(this._slides[index + i].element)\r\n                  .then(() => {\r\n                    this._slides[index + i].loaded = true;\r\n                    this._checkIfAllLoaded();\r\n                  })\r\n              }\r\n              if (this._slides[index - i]) {\r\n                (this._slideLoad as any)(this._slides[index - i].element)\r\n                  .then(() => {\r\n                    this._slides[index - i].loaded = true;\r\n                    this._checkIfAllLoaded();\r\n                  })\r\n              }\r\n            }\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.error(err);\r\n        });\r\n    }\r\n\r\n    // if translate is needed then perform translation\r\n    if (translate && this._slides[index]) {\r\n      let value = (this._state.swiperWidth - this._slides[index].width) / 2 - this._slides[index].position\r\n      \r\n      //if stick to edges\r\n      if (this._limitToEdges) {\r\n        const limit = this._state.swiperWidth - this._state.slidesWrapperWidth;\r\n        const stickToStart = value > - (this._slides[0].width / 2);\r\n        const stickToEnd = value < limit + (this._slides[this._slideCount - 1].width / 2);\r\n        if (stickToEnd && stickToStart) {\r\n          value = this._swipeSession.direction < 0 ? limit : 0;\r\n        } else if (stickToStart) {\r\n          value = 0;\r\n        } else if (stickToEnd) {\r\n          value = limit;\r\n        }\r\n      }\r\n      this._translate(value, 500);\r\n    }\r\n\r\n    // handle classnames\r\n    this._slides[index]?.element.classList.add(\"is-active\");\r\n    this._swiperElement?.classList.remove(\"is-first\", \"is-last\");\r\n    if (index === 0) {\r\n      this._swiperElement?.classList.add(\"is-first\");\r\n    } else if (index === this._slideCount - 1) {\r\n      this._swiperElement?.classList.add(\"is-last\");\r\n    }\r\n\r\n    if (index === this._state.currentIndex) return; // no change\r\n\r\n    // remose active classname to old active slide\r\n    this._slides[this._state.currentIndex].element.classList.remove(\r\n      \"is-active\"\r\n    );\r\n    // update current index\r\n    this._state.currentIndex = index;\r\n\r\n    // call index change callback\r\n    if (this._indexChangeCallback) this._indexChangeCallback(index);\r\n\r\n    //if children swipers are connected perform index change to connected swipers\r\n    if (this._childrenSwipers) {\r\n      this._childrenSwipers.forEach((swiper) => {\r\n        swiper.index = index;\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Retrieves the active index based on the given position.\r\n   */\r\n  _getIndexByPosition = (translate: number): number => {\r\n    const offset = -1 * this._state.swiperWidth / 2;\r\n    const ii = this._slides.findIndex(\r\n      slide => offset + slide.position <= translate && offset + slide.position + slide.width >= translate\r\n    )\r\n\r\n    return this._slides.findIndex(slide => offset + slide.position <= translate && offset + slide.position + slide.width >= translate);\r\n  }\r\n\r\n  /**\r\n   * Check if all slides are loaded.\r\n   */\r\n  _checkIfAllLoaded = (): void => {\r\n    this._state.slidesLoaded = this._slides.every((slide) => slide.loaded);\r\n  }\r\n\r\n  get index() {\r\n    return this._state.currentIndex;\r\n  }\r\n\r\n  set index(index) {\r\n    this._setIndex(index);\r\n  }\r\n\r\n  /**\r\n   * setter for slide click callback\r\n   */\r\n  set slideClick(callback: (index: number, element: HTMLElement) => void) {\r\n    this._slideClick = callback;\r\n  }\r\n}"],"mappings":"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","names":["index"]}